<app-layout>
  <div class="estoques-container">
    <!-- Header -->
    <div class="estoques-header">
      <h1>Meus Estoques</h1>
      <button class="btn btn-primary" (click)="abrirFormulario()">
        + Criar Novo Estoque
      </button>
    </div>

    <!-- Mensagem de Carregamento -->
    <div *ngIf="isLoading" class="loading">
      <p>Carregando estoques...</p>
    </div>

    <!-- Mensagem de Erro -->
    <div *ngIf="erro && !isLoading" class="alert alert-danger">
      {{ erro }}
    </div>

    <!-- Grid de Estoques -->
    <div *ngIf="!isLoading && estoques.length > 0" class="estoques-grid">
      <div *ngFor="let estoque of estoques" class="estoque-card">
        <div class="estoque-header-card">
          <h3>{{ estoque.nome }}</h3>
          <button class="btn-delete" (click)="deletarEstoque(estoque)" title="Deletar estoque">
            üóëÔ∏è
          </button>
        </div>

        <p class="estoque-descricao">{{ estoque.descricao || 'Sem descri√ß√£o' }}</p>

        <div class="estoque-info">
          <span class="info-item">
            <strong>Produtos:</strong> {{ estoque.produtos?.length || 0 }}
          </span>
        </div>

        <button
          class="btn btn-primary w-100 mt-3"
          (click)="selecionarEstoque(estoque)"
        >
          Acessar Estoque
        </button>
      </div>
    </div>

    <!-- Mensagem quando n√£o h√° estoques -->
    <div *ngIf="!isLoading && estoques.length === 0" class="empty-state">
      <p>Voc√™ ainda n√£o possui estoques.</p>
      <button class="btn btn-primary" (click)="abrirFormulario()">
        Criar Primeiro Estoque
      </button>
    </div>

    <!-- Modal para Criar Estoque -->
    <div *ngIf="showFormModal" class="modal-overlay" (click)="fecharFormulario()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Criar Novo Estoque</h3>
          <button class="btn-close" (click)="fecharFormulario()">‚úï</button>
        </div>

        <form class="modal-form">
          <div class="form-group">
            <label for="nome">Nome do Estoque *</label>
            <input
              type="text"
              id="nome"
              class="form-control"
              [(ngModel)]="novoEstoque.nome"
              name="nome"
              placeholder="Ex: Estoque Principal"
            />
          </div>

          <div class="form-group">
            <label for="descricao">Descri√ß√£o</label>
            <textarea
              id="descricao"
              class="form-control"
              [(ngModel)]="novoEstoque.descricao"
              name="descricao"
              placeholder="Descri√ß√£o do estoque (opcional)"
              rows="3"
            ></textarea>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" (click)="fecharFormulario()">
              Cancelar
            </button>
            <button type="button" class="btn btn-primary" (click)="criarEstoque()">
              Criar Estoque
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</app-layout>
